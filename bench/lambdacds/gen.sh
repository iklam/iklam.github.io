# Generate TestI.java and TestD.java

NUM=200

MODE=$1

if [[ "$2" != "" ]]; then
    NUM=$2
fi

MAX=$(expr $NUM - 1)
cat <<EOF
// This file is auto-generated by $0. Do not edit.
public class Test${MODE} {
  public static void main(String args[]) throws Throwable {
    int n = Integer.parseInt(args[0]);
EOF


for i in $(seq 0 $MAX); do
    echo "    if ($i < n) { TestCase_$i.doit(); }"
done
echo "  }"


if [[ "$MODE" = "I" ]]; then
    for i in $(seq 0 $MAX); do
        cat <<EOF
  static class TestCase_$i {
    static void doit() {
      Runnable r = new Runnable() {
          public void run() {
            foo();
          }
      };
    }
    static void foo() {}
  }
EOF
    done
else
    for i in $(seq 0 $MAX); do
        cat <<EOF
  static class TestCase_$i {
    static void doit() {
      Runnable r = () -> foo();
    }
    static void foo() {}
  }
EOF
    done
fi

echo "}"
